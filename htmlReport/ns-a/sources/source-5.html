


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=GBK"> 
  <title>Coverage Report > GetWeatherView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">chattingSystem.frameworks_drivers.ui.views</a>
</div>

<h1>Coverage Summary for Class: GetWeatherView (chattingSystem.frameworks_drivers.ui.views)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GetWeatherView</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    86.7%
  </span>
  <span class="absValue">
    (65/75)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GetWeatherView$1</td>
<td class="coverageStat">
  <span class="percent">
    25%
  </span>
  <span class="absValue">
    (1/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    14.3%
  </span>
  <span class="absValue">
    (1/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GetWeatherView$2</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    11.1%
  </span>
  <span class="absValue">
    (1/9)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    40%
  </span>
  <span class="absValue">
    (4/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    73.6%
  </span>
  <span class="absValue">
    (67/91)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package chattingSystem.frameworks_drivers.ui.views;
&nbsp;
&nbsp;import chattingSystem.interface_adapter.controllers.GetWeatherController;
&nbsp;import chattingSystem.interface_adapter.state.GetWeatherState;
&nbsp;import chattingSystem.interface_adapter.state.SignupState;
&nbsp;import chattingSystem.interface_adapter.view_models.GetWeatherViewManagerModel;
&nbsp;import chattingSystem.interface_adapter.view_models.GetWeatherViewModel;
&nbsp;import chattingSystem.interface_adapter.view_models.ViewManagerModel;
&nbsp;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.ActionEvent;
&nbsp;import java.awt.event.ActionListener;
&nbsp;import java.awt.event.KeyEvent;
&nbsp;import java.awt.event.KeyListener;
&nbsp;import java.beans.PropertyChangeEvent;
&nbsp;import java.beans.PropertyChangeListener;
&nbsp;
&nbsp;public class GetWeatherView extends JPanel implements ActionListener, PropertyChangeListener {
<b class="fc">&nbsp;    public final String viewName = &quot;Get Weather&quot;;</b>
<b class="fc">&nbsp;    private JTextField cityTextField = new JTextField();</b>
<b class="fc">&nbsp;    private JButton getWeatherBotton = new JButton(&quot;Get Weather&quot;);</b>
<b class="fc">&nbsp;    private JTextArea textDisplayLabel = new JTextArea();</b>
&nbsp;    public GetWeatherViewModel getWeatherViewModel;
&nbsp;    private final GetWeatherViewManagerModel getWeatherViewManagerModel;
&nbsp;    public GetWeatherController getWeatherController;
&nbsp;    private Image backgroundImage;
&nbsp;
&nbsp;    public GetWeatherView(GetWeatherController getWeatherController, GetWeatherViewModel getWeatherViewModel,
&nbsp;                          GetWeatherViewManagerModel getWeatherViewManagerModel,
<b class="fc">&nbsp;                          GetWeatherViewManager getWeatherViewManager) {</b>
<b class="fc">&nbsp;        this.getWeatherController = getWeatherController;</b>
<b class="fc">&nbsp;        this.getWeatherViewModel = getWeatherViewModel;</b>
<b class="fc">&nbsp;        this.getWeatherViewManagerModel = getWeatherViewManagerModel;</b>
<b class="fc">&nbsp;        getWeatherViewManager.addView(this, viewName);</b>
<b class="fc">&nbsp;        getWeatherViewModel.addPropertyChangeListener(this);</b>
&nbsp;
&nbsp;        // get the address of the background image
<b class="fc">&nbsp;        backgroundImage = new ImageIcon(&quot;src/main/java/chattingSystem/frameworks_drivers/ui/views/weatherimage.png&quot;).getImage();</b>
<b class="fc">&nbsp;        setLayout(new GridBagLayout());</b>
&nbsp;
<b class="fc">&nbsp;        JLabel titleLabel = new JLabel(&quot;Weather Report&quot;);</b>
<b class="fc">&nbsp;        titleLabel.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 25));</b>
<b class="fc">&nbsp;        titleLabel.setForeground(new Color(218, 165, 32));</b>
<b class="fc">&nbsp;        titleLabel.setBackground(new Color(220, 220, 220));</b>
<b class="fc">&nbsp;        GridBagConstraints titleConstraints = new GridBagConstraints();</b>
<b class="fc">&nbsp;        titleConstraints.gridx = 0;</b>
<b class="fc">&nbsp;        titleConstraints.gridy = 0;</b>
<b class="fc">&nbsp;        titleConstraints.gridwidth = 2;</b>
<b class="fc">&nbsp;        titleConstraints.insets = new Insets(10, 0, 10, 0);</b>
<b class="fc">&nbsp;        titleConstraints.anchor = GridBagConstraints.CENTER;</b>
<b class="fc">&nbsp;        add(titleLabel, titleConstraints);</b>
&nbsp;
&nbsp;        // Enter City Label
<b class="fc">&nbsp;        JLabel enterCityLabel = new JLabel(&quot;Enter City: &quot;);</b>
<b class="fc">&nbsp;        enterCityLabel.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 15));</b>
<b class="fc">&nbsp;        GridBagConstraints enterCityLabelConstraints = new GridBagConstraints();</b>
<b class="fc">&nbsp;        enterCityLabelConstraints.gridx = 0;</b>
<b class="fc">&nbsp;        enterCityLabelConstraints.gridy = 1;</b>
<b class="fc">&nbsp;        enterCityLabelConstraints.insets = new Insets(0, 10, 5, 5);</b>
<b class="fc">&nbsp;        add(enterCityLabel, enterCityLabelConstraints);</b>
&nbsp;
&nbsp;        // City TextField
<b class="fc">&nbsp;        GridBagConstraints cityTextFieldConstraints = new GridBagConstraints();</b>
<b class="fc">&nbsp;        cityTextFieldConstraints.gridx = 1;</b>
<b class="fc">&nbsp;        cityTextFieldConstraints.gridy = 1;</b>
<b class="fc">&nbsp;        cityTextFieldConstraints.weightx = 1.0;</b>
<b class="fc">&nbsp;        cityTextFieldConstraints.fill = GridBagConstraints.HORIZONTAL;</b>
<b class="fc">&nbsp;        cityTextFieldConstraints.insets = new Insets(0, 0, 5, 10);</b>
<b class="fc">&nbsp;        add(cityTextField, cityTextFieldConstraints);</b>
&nbsp;
&nbsp;        // Get Weather Button
<b class="fc">&nbsp;        GridBagConstraints getWeatherButtonConstraints = new GridBagConstraints();</b>
<b class="fc">&nbsp;        getWeatherBotton.setBackground(new Color(30, 144, 255));</b>
<b class="fc">&nbsp;        getWeatherBotton.setForeground(Color.WHITE);</b>
<b class="fc">&nbsp;        getWeatherBotton.setFocusPainted(false);</b>
<b class="fc">&nbsp;        getWeatherButtonConstraints.gridx = 0;</b>
<b class="fc">&nbsp;        getWeatherButtonConstraints.gridy = 2;</b>
<b class="fc">&nbsp;        getWeatherButtonConstraints.gridwidth = 2;</b>
<b class="fc">&nbsp;        getWeatherButtonConstraints.insets = new Insets(10, 0, 10, 0);</b>
<b class="fc">&nbsp;        getWeatherButtonConstraints.anchor = GridBagConstraints.CENTER;</b>
<b class="fc">&nbsp;        add(getWeatherBotton, getWeatherButtonConstraints);</b>
&nbsp;
&nbsp;        // Text Display Label (Large JLabel with the shape of a box)
<b class="fc">&nbsp;        textDisplayLabel.setBorder(BorderFactory.createLineBorder(Color.BLACK));</b>
<b class="fc">&nbsp;        textDisplayLabel.setLineWrap(true);</b>
<b class="fc">&nbsp;        textDisplayLabel.setWrapStyleWord(true);</b>
<b class="fc">&nbsp;        textDisplayLabel.setEditable(false);</b>
<b class="fc">&nbsp;        GridBagConstraints textDisplayLabelConstraints = new GridBagConstraints();</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.gridx = 0;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.gridy = 3;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.gridwidth = 2;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.weightx = 0.5;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.weighty = 0.5;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.fill = GridBagConstraints.BOTH;</b>
<b class="fc">&nbsp;        textDisplayLabelConstraints.insets = new Insets(0, 80, 50, 80);</b>
<b class="fc">&nbsp;        JScrollPane scrollPane = new JScrollPane(textDisplayLabel);</b>
<b class="fc">&nbsp;        add(scrollPane, textDisplayLabelConstraints);</b>
&nbsp;
&nbsp;        // Action listener for the Get Weather Button
<b class="fc">&nbsp;        cityTextField.addKeyListener(</b>
<b class="fc">&nbsp;                new KeyListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void keyTyped(KeyEvent e) {
<b class="nc">&nbsp;                        GetWeatherState currentState = getWeatherViewModel.getState();</b>
<b class="nc">&nbsp;                        String cityLocation = cityTextField.getText() + e.getKeyChar();</b>
<b class="nc">&nbsp;                        currentState.setCityLocation(cityLocation);</b>
<b class="nc">&nbsp;                        getWeatherViewModel.setState(currentState);</b>
&nbsp;                    }
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;                    }</b>
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyReleased(KeyEvent e) {
<b class="nc">&nbsp;                    }</b>
&nbsp;                });
&nbsp;
<b class="fc">&nbsp;        getWeatherBotton.addActionListener(</b>
<b class="fc">&nbsp;                new ActionListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                        if (e.getSource().equals(getWeatherBotton)) {</b>
<b class="nc">&nbsp;                            GetWeatherState oldState = getWeatherViewModel.getState();</b>
<b class="nc">&nbsp;                            getWeatherController.execute(</b>
<b class="nc">&nbsp;                                    oldState.getCityLocation()</b>
&nbsp;                            );
<b class="nc">&nbsp;                            GetWeatherState currentState = getWeatherViewModel.getState();</b>
<b class="nc">&nbsp;                            String weatherInfoDisplay = currentState.getWeatherInfoDisplay();</b>
<b class="nc">&nbsp;                            textDisplayLabel.setText(weatherInfoDisplay);</b>
<b class="nc">&nbsp;                            cityTextField.setText(&quot;&quot;);</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;        );
&nbsp;
&nbsp;    }
&nbsp;    @Override
&nbsp;    protected void paintComponent(Graphics g) {
<b class="fc">&nbsp;        super.paintComponent(g);</b>
&nbsp;        // Paint the background image
<b class="fc">&nbsp;        g.drawImage(backgroundImage, 0, 0, getWidth(), getHeight(), this);</b>
&nbsp;    }
&nbsp;    public void actionPerformed(ActionEvent evt) {
<b class="nc">&nbsp;        System.out.println(&quot;Click &quot; + evt.getActionCommand());</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void propertyChange(PropertyChangeEvent evt) {
<b class="nc">&nbsp;        GetWeatherState state = (GetWeatherState) evt.getNewValue();</b>
<b class="nc">&nbsp;        if (state.getErrorMessage() != null) {</b>
<b class="nc">&nbsp;            JOptionPane.showMessageDialog(this, state.getErrorMessage());</b>
<b class="nc">&nbsp;            state.setErrorMessage(null);</b>
&nbsp;        }else{
&nbsp;                // Clear the input fields
<b class="nc">&nbsp;            cityTextField.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;            GetWeatherState currentState = getWeatherViewModel.getState();</b>
<b class="nc">&nbsp;            currentState.setCityLocation(&quot;&quot;);</b>
<b class="nc">&nbsp;            currentState.setWeatherInfoDisplay(null);</b>
<b class="nc">&nbsp;            getWeatherViewModel.setState(currentState);</b>
&nbsp;            }
&nbsp;        }
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-12-02 17:40</div>
</div>
</body>
</html>
