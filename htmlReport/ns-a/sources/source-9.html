


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=GBK"> 
  <title>Coverage Report > SignupView</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">chattingSystem.frameworks_drivers.ui.views</a>
</div>

<h1>Coverage Summary for Class: SignupView (chattingSystem.frameworks_drivers.ui.views)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">SignupView</td>
<td class="coverageStat">
  <span class="percent">
    75%
  </span>
  <span class="absValue">
    (3/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    82.7%
  </span>
  <span class="absValue">
    (81/98)
  </span>
</td>
</tr>
  <tr>
    <td class="name">SignupView$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    80%
  </span>
  <span class="absValue">
    (8/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SignupView$2</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    6.7%
  </span>
  <span class="absValue">
    (1/15)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SignupView$3</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    71.4%
  </span>
  <span class="absValue">
    (5/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SignupView$4</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    75%
  </span>
  <span class="absValue">
    (6/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">SignupView$5</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (4/6)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    60%
  </span>
  <span class="absValue">
    (12/20)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    72.9%
  </span>
  <span class="absValue">
    (105/144)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package chattingSystem.frameworks_drivers.ui.views;
&nbsp;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.awt.event.ActionEvent;
&nbsp;import java.awt.event.ActionListener;
&nbsp;import java.awt.event.KeyEvent;
&nbsp;import java.awt.event.KeyListener;
&nbsp;import java.beans.PropertyChangeEvent;
&nbsp;import java.beans.PropertyChangeListener;
&nbsp;import java.io.IOException;
&nbsp;
&nbsp;import chattingSystem.interface_adapter.view_models.SignupViewModel;
&nbsp;import chattingSystem.interface_adapter.controllers.SignupController;
&nbsp;import chattingSystem.interface_adapter.state.SignupState;
&nbsp;import chattingSystem.interface_adapter.view_models.ViewManagerModel;
&nbsp;
&nbsp;public class SignupView extends JPanel implements ActionListener, PropertyChangeListener {
<b class="fc">&nbsp;    public final String viewName = &quot;sign up&quot;;</b>
&nbsp;    private final SignupViewModel signupViewModel;
&nbsp;    private final ViewManagerModel viewManagerModel;
<b class="fc">&nbsp;    private final JTextField usernameInputField = new JTextField(15);</b>
<b class="fc">&nbsp;    private final JPasswordField passwordInputField = new JPasswordField(15);</b>
<b class="fc">&nbsp;    private final JPasswordField repeatPasswordInputField = new JPasswordField(15);</b>
&nbsp;    private final SignupController signupController;
&nbsp;    private final JButton signUp;
&nbsp;    private final JButton cancel;
&nbsp;
<b class="fc">&nbsp;    private final JLabel passwordHintLabel = new JLabel(&quot;&lt;html&gt;Password must be at least 8 characters long and include:&lt;ul&gt;&quot; +</b>
&nbsp;            &quot;&lt;li&gt;At least one uppercase letter&lt;/li&gt;&quot; +
&nbsp;            &quot;&lt;li&gt;At least one lowercase letter&lt;/li&gt;&quot; +
&nbsp;            &quot;&lt;li&gt;At least one number&lt;/li&gt;&lt;/ul&gt;&lt;/html&gt;&quot;);
&nbsp;
<b class="fc">&nbsp;    public SignupView(SignupController controller, SignupViewModel signupViewModel, ViewManagerModel viewManagerModel) {</b>
<b class="fc">&nbsp;        this.signupController = controller;</b>
<b class="fc">&nbsp;        this.signupViewModel = signupViewModel;</b>
<b class="fc">&nbsp;        this.viewManagerModel = viewManagerModel;</b>
<b class="fc">&nbsp;        signupViewModel.addPropertyChangeListener(this);</b>
&nbsp;
<b class="fc">&nbsp;        setLayout(new GridBagLayout());</b>
<b class="fc">&nbsp;        GridBagConstraints gbc = new GridBagConstraints();</b>
<b class="fc">&nbsp;        gbc.fill = GridBagConstraints.HORIZONTAL;</b>
&nbsp;
&nbsp;        // Title
<b class="fc">&nbsp;        JLabel title = new JLabel(SignupViewModel.TITLE_LABEL, SwingConstants.CENTER);</b>
<b class="fc">&nbsp;        title.setFont(new Font(&quot;Times&quot;, Font.BOLD, 24));</b>
&nbsp;        // let title be more beautiful and higher in the window
<b class="fc">&nbsp;        title.setForeground(new Color(30, 144, 255));</b>
<b class="fc">&nbsp;        title.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));</b>
<b class="fc">&nbsp;        gbc.gridwidth = 2;</b>
<b class="fc">&nbsp;        gbc.gridx = 0;</b>
<b class="fc">&nbsp;        gbc.gridy = 0;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(10, 10, 5, 10);</b>
<b class="fc">&nbsp;        add(title, gbc);</b>
&nbsp;
&nbsp;        // Username label and text field
<b class="fc">&nbsp;        gbc.gridy++;</b>
<b class="fc">&nbsp;        gbc.gridwidth = 1;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 10, 5, 5);</b>
<b class="fc">&nbsp;        add(new JLabel(SignupViewModel.USERNAME_LABEL), gbc);</b>
&nbsp;
<b class="fc">&nbsp;        gbc.gridx++;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 5, 5, 10);</b>
<b class="fc">&nbsp;        add(usernameInputField, gbc);</b>
&nbsp;
&nbsp;        // Password label and text field
<b class="fc">&nbsp;        gbc.gridy++;</b>
<b class="fc">&nbsp;        gbc.gridx = 0;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 10, 5, 5);</b>
<b class="fc">&nbsp;        add(new JLabel(SignupViewModel.PASSWORD_LABEL), gbc);</b>
&nbsp;
<b class="fc">&nbsp;        gbc.gridx++;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 5, 5, 10);</b>
<b class="fc">&nbsp;        add(passwordInputField, gbc);</b>
&nbsp;
&nbsp;        // Repeat Password label and text field
<b class="fc">&nbsp;        gbc.gridy++;</b>
<b class="fc">&nbsp;        gbc.gridx = 0;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 10, 5, 5);</b>
<b class="fc">&nbsp;        add(new JLabel(SignupViewModel.REPEAT_PASSWORD_LABEL), gbc);</b>
&nbsp;
<b class="fc">&nbsp;        gbc.gridx++;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 5, 5, 10);</b>
<b class="fc">&nbsp;        add(repeatPasswordInputField, gbc);</b>
&nbsp;
&nbsp;        // Password hint label
<b class="fc">&nbsp;        gbc.gridy++;</b>
<b class="fc">&nbsp;        gbc.gridx = 0;</b>
<b class="fc">&nbsp;        gbc.gridwidth = 2;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(5, 10, 5, 10);</b>
&nbsp;        // the password hint label is initially hidden, when typing in the password field it will be shown
<b class="fc">&nbsp;        passwordHintLabel.setVisible(false);</b>
<b class="fc">&nbsp;        add(passwordHintLabel, gbc);</b>
&nbsp;
&nbsp;        // Buttons
<b class="fc">&nbsp;        gbc.gridy++;</b>
<b class="fc">&nbsp;        gbc.insets = new Insets(10, 10, 10, 10);</b>
<b class="fc">&nbsp;        JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 10, 0));</b>
<b class="fc">&nbsp;        signUp = new JButton(SignupViewModel.SIGNUP_BUTTON_LABEL);</b>
<b class="fc">&nbsp;        buttonsPanel.add(signUp);</b>
<b class="fc">&nbsp;        cancel = new JButton(SignupViewModel.CANCEL_BUTTON_LABEL);</b>
<b class="fc">&nbsp;        buttonsPanel.add(cancel);</b>
<b class="fc">&nbsp;        add(buttonsPanel, gbc);</b>
&nbsp;
&nbsp;        // Customize components
<b class="fc">&nbsp;        customizeComponents();</b>
&nbsp;
&nbsp;        // Adding action listeners
<b class="fc">&nbsp;        signUp.addActionListener(</b>
&nbsp;                // This creates an anonymous subclass of ActionListener and instantiates it.
<b class="fc">&nbsp;                new ActionListener() {</b>
&nbsp;                    public void actionPerformed(ActionEvent e) {
<b class="fc">&nbsp;                        if (e.getSource().equals(signUp)) {</b>
<b class="fc">&nbsp;                            SignupState currentState = signupViewModel.getState();</b>
&nbsp;
&nbsp;                            try {
<b class="fc">&nbsp;                                signupController.execute(</b>
<b class="fc">&nbsp;                                        currentState.getUsername(),</b>
<b class="fc">&nbsp;                                        currentState.getPassword(),</b>
<b class="fc">&nbsp;                                        currentState.getRepeatPassword()</b>
&nbsp;                                );
<b class="nc">&nbsp;                            } catch (IOException ex) {</b>
<b class="nc">&nbsp;                                throw new RuntimeException(ex);</b>
<b class="fc">&nbsp;                            }</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;        );
&nbsp;
<b class="fc">&nbsp;        cancel.addActionListener(new ActionListener() {</b>
&nbsp;            public void actionPerformed(ActionEvent e) {
<b class="nc">&nbsp;                if (e.getSource().equals(cancel)) {</b>
&nbsp;                    // pump a message to the user whether to confirm the cancelation
<b class="nc">&nbsp;                    int result = JOptionPane.showConfirmDialog(SignupView.this, &quot;Are you sure you want to cancel the signup process?&quot;);</b>
<b class="nc">&nbsp;                    if (result != JOptionPane.YES_OPTION) {</b>
&nbsp;                        return;
&nbsp;                    }
&nbsp;                    // Clear the input fields
<b class="nc">&nbsp;                    usernameInputField.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;                    passwordInputField.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;                    repeatPasswordInputField.setText(&quot;&quot;);</b>
&nbsp;
&nbsp;                    // Reset the state if needed
<b class="nc">&nbsp;                    SignupState currentState = signupViewModel.getState();</b>
<b class="nc">&nbsp;                    currentState.setUsername(&quot;&quot;);</b>
<b class="nc">&nbsp;                    currentState.setPassword(&quot;&quot;);</b>
<b class="nc">&nbsp;                    currentState.setRepeatPassword(&quot;&quot;);</b>
<b class="nc">&nbsp;                    signupViewModel.setState(currentState);</b>
&nbsp;
&nbsp;                    // Optionally, inform the user that the signup process has been canceled
<b class="nc">&nbsp;                    JOptionPane.showMessageDialog(SignupView.this, &quot;Signup process has been canceled.&quot;);</b>
&nbsp;
&nbsp;
&nbsp;                    // Handle any other logic that should occur after canceling the signup,
&nbsp;                    // such as switching to a different view, if applicable.
&nbsp;                    // ...
<b class="nc">&nbsp;                    viewManagerModel.setActiveView(&quot;log in&quot;);</b>
&nbsp;
<b class="nc">&nbsp;                    viewManagerModel.firePropertyChanged();</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;
&nbsp;
&nbsp;
<b class="fc">&nbsp;        usernameInputField.addKeyListener(</b>
<b class="fc">&nbsp;                new KeyListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void keyTyped(KeyEvent e) {
<b class="fc">&nbsp;                        SignupState currentState = signupViewModel.getState();</b>
<b class="fc">&nbsp;                        String text = usernameInputField.getText() + e.getKeyChar();</b>
<b class="fc">&nbsp;                        currentState.setUsername(text);</b>
<b class="fc">&nbsp;                        signupViewModel.setState(currentState);</b>
&nbsp;                    }
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;                    }</b>
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyReleased(KeyEvent e) {
<b class="nc">&nbsp;                    }</b>
&nbsp;                });
&nbsp;
<b class="fc">&nbsp;        passwordInputField.addKeyListener(</b>
<b class="fc">&nbsp;                new KeyListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void keyTyped(KeyEvent e) {
<b class="fc">&nbsp;                        SignupState currentState = signupViewModel.getState();</b>
<b class="fc">&nbsp;                        currentState.setPassword(passwordInputField.getText() + e.getKeyChar());</b>
<b class="fc">&nbsp;                        signupViewModel.setState(currentState);</b>
<b class="fc">&nbsp;                        int passwordLength = passwordInputField.getPassword().length;</b>
<b class="fc">&nbsp;                        passwordHintLabel.setVisible(passwordLength &gt; 0);</b>
&nbsp;                    }
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyPressed(KeyEvent e) {
<b class="nc">&nbsp;                    }</b>
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyReleased(KeyEvent e) {
&nbsp;
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;        );
&nbsp;
<b class="fc">&nbsp;        repeatPasswordInputField.addKeyListener(</b>
<b class="fc">&nbsp;                new KeyListener() {</b>
&nbsp;                    @Override
&nbsp;                    public void keyTyped(KeyEvent e) {
<b class="fc">&nbsp;                        SignupState currentState = signupViewModel.getState();</b>
<b class="fc">&nbsp;                        currentState.setRepeatPassword(repeatPasswordInputField.getText() + e.getKeyChar());</b>
<b class="fc">&nbsp;                        signupViewModel.setState(currentState); // Hmm, is this necessary?</b>
&nbsp;                    }
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyPressed(KeyEvent e) {
&nbsp;
<b class="nc">&nbsp;                    }</b>
&nbsp;
&nbsp;                    @Override
&nbsp;                    public void keyReleased(KeyEvent e) {
&nbsp;
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;        );
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private void customizeComponents() {
&nbsp;        // Customize the UI elements here (fonts, borders, colors, etc.)
&nbsp;        // Consider using a UIManager to set a theme or custom styling
&nbsp;        // ...
&nbsp;
&nbsp;        // making the caption more beautiful
<b class="fc">&nbsp;        usernameInputField.setFont(new Font(&quot;Times&quot;, Font.BOLD, 12));</b>
<b class="fc">&nbsp;        passwordInputField.setFont(new Font(&quot;Times&quot;, Font.BOLD, 12));</b>
<b class="fc">&nbsp;        repeatPasswordInputField.setFont(new Font(&quot;Times&quot;, Font.BOLD, 12));</b>
&nbsp;
&nbsp;        // setting the background color
<b class="fc">&nbsp;        usernameInputField.setBorder(BorderFactory.createLineBorder(Color.GRAY, 1));</b>
<b class="fc">&nbsp;        passwordInputField.setBorder(BorderFactory.createLineBorder(Color.GRAY, 1));</b>
<b class="fc">&nbsp;        repeatPasswordInputField.setBorder(BorderFactory.createLineBorder(Color.GRAY, 1));</b>
&nbsp;
<b class="fc">&nbsp;        signUp.setBackground(new Color(30, 144, 255));</b>
<b class="fc">&nbsp;        signUp.setForeground(Color.WHITE);</b>
<b class="fc">&nbsp;        signUp.setFocusPainted(false);</b>
<b class="fc">&nbsp;        signUp.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 12));</b>
&nbsp;
<b class="fc">&nbsp;        cancel.setBackground(Color.LIGHT_GRAY);</b>
<b class="fc">&nbsp;        cancel.setForeground(Color.WHITE);</b>
<b class="fc">&nbsp;        cancel.setFocusPainted(false);</b>
<b class="fc">&nbsp;        cancel.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 12));</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void actionPerformed(ActionEvent evt) {
&nbsp;        // This method is called whenever the timer fires an action event.
&nbsp;        // We don&#39;t need to do anything here, but we need to implement this method
&nbsp;        // because we&#39;re implementing the ActionListener interface.
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    @Override
&nbsp;    public void propertyChange(PropertyChangeEvent evt) {
<b class="fc">&nbsp;            SignupState state = (SignupState) evt.getNewValue();</b>
<b class="fc">&nbsp;            if (state.getUsernameError() != null) {</b>
<b class="fc">&nbsp;                JOptionPane.showMessageDialog(this, state.getUsernameError());</b>
<b class="fc">&nbsp;                state.setUsernameError(null);</b>
<b class="nc">&nbsp;            }else if (state.getPasswordError() != null) {</b>
<b class="nc">&nbsp;                JOptionPane.showMessageDialog(this, state.getPasswordError());</b>
<b class="nc">&nbsp;                state.setPasswordError(null);</b>
<b class="nc">&nbsp;            }else if (state.getRepeatPasswordError() != null) {</b>
<b class="nc">&nbsp;                JOptionPane.showMessageDialog(this, state.getRepeatPasswordError());</b>
<b class="nc">&nbsp;                state.setRepeatPasswordError(null);</b>
&nbsp;            }else{
<b class="nc">&nbsp;                if (viewManagerModel.getActiveView().equals(&quot;sign up&quot;)) {</b>
&nbsp;                    // Clear the input fields
<b class="nc">&nbsp;                    usernameInputField.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;                    passwordInputField.setText(&quot;&quot;);</b>
<b class="nc">&nbsp;                    repeatPasswordInputField.setText(&quot;&quot;);</b>
&nbsp;
&nbsp;                    // Reset the state if needed
<b class="nc">&nbsp;                    SignupState currentState = signupViewModel.getState();</b>
<b class="nc">&nbsp;                    currentState.setUsername(&quot;&quot;);</b>
<b class="nc">&nbsp;                    currentState.setPassword(&quot;&quot;);</b>
<b class="nc">&nbsp;                    currentState.setRepeatPassword(&quot;&quot;);</b>
<b class="nc">&nbsp;                    signupViewModel.setState(currentState);</b>
<b class="nc">&nbsp;                    JOptionPane.showMessageDialog(this, &quot;Signup successful!&quot;);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-12-02 18:22</div>
</div>
</body>
</html>
